SPRITE LAYERS.

background art 0
walls bellow grid items 5
grid items are on top of everything. below units. 10
checkpoints 15
units 20
items 25

UI 100

13.6.2018
Add walls. Like a building.

Soo. I have a few ways to do this. Full slot walls. Thin walls.
Full slot walls will make climbing easy too.

How do I want to build level? Place stuff. Then apply items.

Maybe grid detects which slot are taken ?
-- all raycasting + components.


Abilities are active depending on the slot, the area around it.
- ui system that allows you to show new items. 
One way is to just show the abilities, above items.
Another is to show them in drop down menu.
- load items based on parameters scanned from slot.
- somehow mark objects in area, and make them avaliable to scan - per range per ability

Ok I got abilities of slots. Or parameters.
Now these things have to be loaded on grid - ok, so they can be accesed from ui controller - ok.
The items have to be activated to show UI when player selects unit. -ok 1
ui has to be constructed by hand, or just enabled piece by piece. -ok
ui pieces have to moved so they don't cover each other. Do this LATER! -ok ish
works for now. should be redone to be more robust.
ui shuold be visible only in interaction range.

ability slots ui.

-accuracy. throw range. guns. pick item. flip table. deco-remateliarize. pass item.
AP restore. aoe shield. reinforce area or item. aoe blast cone.aoe drain. passive

pick item: ui when on slot to pick up. -ok
ui button list with attached abilities? ok 19.6.2018
all player's abilities are assigned to ui - ok

stats that can be upgraded.
accuracy - added weapon class -ok
throw range - mask takes care of that, just add throw equipped ability. -ok
AP - ok
pickup. -ok
guns/items. -ok
wall cover
flip table - cut
classes
collect material - ok
pass item - inventory
AP restore
reinforce self
reinforce slot
aoe cone attack
aoe life drain
life per slot
air per slot
passives.

skill tree

23.6.2018
**
o. I don't have a concrete way to add abilities to units.
x. Fixed so all abilities use same system, grid slots.
- env abilitites
button shows up over slot and you click it
multiple choices
scrap this, u need 1 choice, have multiple attacks
- aoe env ability
same as normal attack?
spawn grid that follows mouse, snapped
on attacks, spawn grid based on mask.

- normal attacks
avaliable grid slot colors, and you press the grid.
- ui attacks
u press ui to select active normal attack
**
**
o. how to represent grid over map
x. semi transparent static grid where stuff can be done. background is behind it.

*dynamic grid - no
2 grids - map in the background and transparent clickable grid.
abilities and all that, instead spawns a new grid item overlay.
spawning is better, because we have better control over what's visible.
if it's grid... all we can do is recolor it.

spawn Mask or multiple masks
spawned mask can optionally be moved to mouse, inside range.
*

we click on grid items, props are ignored. -y
grid items are replacable. -no

oh this would allow me to have per slot type action. - cut

so click player ability button -> button interaction(two step attack)  - ok
-> (spawn mask -> click in loop -> destroy mask)

move: select unit in loop -> (spawn mask -> click in loop -> destroy mask) -ok

soo, have an ability scanner that scans area for certain interactions.
opt 1: always raycast, for every interaction choice. faster, costlier ~20 raycasts per hit.
opt 2: have data stored on grid item. it changes annoying to deal with every 
change. slot get's consumed -> changes, interaction is replaced. - ok
opt 3: re raycast every time there is a change on map.
attack + interaction type + mask = selectable area - ok

pickup ability on the attack list ok -24.6.2018


24.6.2018 - checkup
so far i redid the coloring system and attacking system. now it supports attacking for 
enbirounment and interactions both via the grid.
removed button based attack system.
i have a few standard attacks, range and melle, and weapon pickup and throw.
added hp bars.
standardized sprite layers

ned: finishing done 24.6-30.6
1) come up with a scenario for levels - level design direction - pet/sob - got some ideas
2) add more abilities - complete through 3(aoe cone ability)
3) add other classes <- finish builder - tor, then enhancer - sre and consumer - čet -ok
Results: completed on time. could have more abilities, but it's satisfactory for now.

** Build ability
comes with a mask that can be rotated
by default mask should be turned left to right

shapes: I, T, U, B

note: fill priority mask with ints instead of bools? this would let me have a spread mask
-> or better have a different mask for this.
**
** Collector class 26.6.2018 - 1d
Collector: Energy manipulation frontliner.

Hunker/calm. Increase defence for 1 turn. Restores some AP. -ok
instant ability, consumes all actions, end turn
grant defence or armor for 1 turn(inc hp?)
additional visual effects!

Enforce. Release inner power for a shield. Can block attacks in small area around the collector.
!

Enhance. Enhances (equipped) item or area. /Useful for reinforcing walls or doors against bullets./Useful for improving weapons
to item -> increase damage or range

Enhance walls or area. << currently useless since walls don't get destroyed. Could be used to consume more? meh.

Enhance item.
activate special ability for 2 turns. ability is on item not unit, so item can be passed to other units. (special turn counter on item, apply damage activates it)
--opt1: enhance type defines effect change--
opt2: weapon type defines effect change <-- a lot of interesting options. go with this.
Door: survivabilty against bullets
gun: insanity bullet - collector's aura gets mixed in opponets aura, which makes them lose control - reduce will?, maxmoves for n turns
stick: it becomes hard like steel which allows our soldiers to hit harder. increased damage.

Another interesting options is to to pass an enhanced item to unit with more actions, or further in in combat. -ok

! bullets destroy walls

Blast. Fire energy blast to affect area in some direction. High AP usage. -ok
aoe damage

**

Consumer - ok
Drain life. Permanently drains life out of area around them. Give full AP. Affects allies
Drain flora. Drains plants and small life. Restores some AP.
Passive. Air drain. Restore 1 AP. Because of continous strain recieve Fatigue every 5 turns.

grid slots have plant life (taht slowly restores itself)
units have life -> converted to AP. no units = no AP
passive -> once per turn
**
next goal: 30.6.18-3.6.18(4 days)-9.7.18(on hold),
Explore art direction
colorful, sharp,
dark, wild
simplistic
find some example pictures, draw some characters, some envirounment, imagine the game's feel.
don't get stuck on art.
Hey look at pictures from different countries. the contrast, the shading
india has like this very bland blend, with high contrast.
"I've always, from day 1... Have been ashamed she said yes when I asked her to marry me. I didn't think I deserved her." -- Francis Underwood.

"I think she created a mess on day 1. And now she's pissed off when it's not working out.
Guy doesn't think he can trust her when she's charming anymore.
And because she says she doesn't date, she can't bother to apologize or try to fix anything. 
She will just ignore the guy and cry to her friends who will probably tell her to dump the guy. And to the guy she will say some shit like she doesn't care or whatever.
The guy can't talk to her either, he doesn't know how to talk about dating with she says
she doesn't date.
He should probably just tell her to zip her i don't date BS.
He doesn't owe an apology for not responding to demands from someone he isn't dating.
And if they are dating, the girl owes him an apology and explanation first.
Does she want to take that step? What step could he take?"
This isn't her tho.

find refs: hxh. fma. kim possible. kr. soul eater. code geass. little witch acad
crystal saga. ep battle fantasy. 
random rpgs
one flat color? soft shaded? cell shaded? hard shaded? blue shaded? contrast shaded?
mood board from refs. for characters only
and one for whole game

**
Sprites: 256x256 per character, transparent. 256, 512, 768, 1024
animation system for characters:
import sprite - cut (256x256)
create animations, 6 frames/sec or 12
- idle
- attack
connect to animation controller
transitions 
temp:idle ->(Attack) attack
temp:attack -> over
add animations script(list of triggers for all attacks), and attach it to unit script
**.
special shadow creature(magic). that extends it's shadow to attack enemies from inside

create a character with a different faction for every gameplay tactic
melle combat - ok
mid range - ok
long range - ok
preparations - ok 
- end of round.
conversations
stealth, infiltration


*******************************
Prototype 1: 4.7.2018
Player's team of 6 characters, you can choose the team members
an extraction pickup goal
some bystanders
one conversation enemy combatant
one inflitration option
one front gate option
1 guard character, 6-12 guards, front gate is conversionalist
one civilian conversionalist that gives you the hint.
the spread out enter combat mode
the normal pre combat walking mode - testing if this improves the experience
one target building, planned, 1 closed building, city(5 buildings area)

a team
5 poorly guarded checkpoints toward faction points
final heavily guarded objective against attacked faction
*******************************
pick a mission screen
a pick team screen
spawn area
some camera controls
checkpoints
factions(points to unlock missions) <break down
missions : require certain num of points with that faction. 
reward: end points+points for any faction from checkpoints
objective area
objective, goal screen
capture fort for faction(mark checkpoints), get to storage
*******************************

about the characters, have some place where abilities are planned/documented

BUG TESTING ROUND 8.7.2018
empty masks on characters <<fixed by hand

bugs stop main game loop <<rewritten loop
missing text on ui -fixed 

16.7.2018
ablity data as scriptable float objects.

22.7.2018 2 DAY CYCLE
world map:
map missions get enabled 1 by 1, like levels
combat: 
spells are enabled only if you have enough energy
also next unit button that jumps to next free unit or ends turn, shows how many units are still avliable

30.7.2018 experimental
wave spawner
spawn area with spawn points
it's tiring to work on all this...
too much work for just me.


let's change to epibf formula
spawn in waves
after each level is cleared

the turn based part is good.

redo the displaying of grids to be easier to use, layer based, color based and dynamic
displayed grids can be move without destroying them
they can be removed or added at will, on any layer inside the sprite system.

2.8.2018 abilities for priest
-
collected attack, use aoe to consume charges, use source-target - ok
aoe / randomization pattern, link to moves made?
standard, 90% dmg cur hp - ok
when attacking save direction to source(attackdata2/attackstartedat) - ok
repeated extended attack by direction from source - ok
require Charges, use: number, max possible - ok, for piercing attacks and aoe
aura, end turn/every time/attacked - ok, affected cap - untested, only enemies/allies/all-ok
passive . restore charges, up to max.-ok

projectiles
show hit areas
extended range piercing shot - on hit modifier
chain attack - on hit modifier
spawn, fly projectiles, avoid targets
-
aoe based on charges
pierce based on charges
large aoe based on hp

prep project to allow fast prototyping
and testing
swap complete ability sets
----------------------------------
register unit < plop unit in, indicator
deregister unit < fade out unit indicator

all player dead < game over, player unit counter
all waves dieid < game win, waves left

enemy moves
enemy wave comes in, cam change

over attack, show attack signal
over move... show move signal, or path over there.

currently active selected ability!

grid items


Goal 14.8.2018
bug fixing
UI clarity update
mvc overhaul
do cycles... mvc overhaul -> UI update -> bug fixing
triple k
cycle 1 = Combat begin kkk
cycle 2 = Combat exectution player kkk
cycle 3 = Action stack for abilities. k 
to be able to wait a bit... animations effects, movement, etc
the point of this is, to stack the enemy commands.
to create buff priority list
maybe stack by events instead?
instead of function calls directly stack- ability id, unity, attack pos
problems if attack pos state changes.

stack by states - end turn, click etc.

